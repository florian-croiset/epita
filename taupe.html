<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mole's Quest – À la recherche des Dieux Disparus</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
<style>
*{margin:0;padding:0;box-sizing:border-box;}


/* bloque tout scroll vertical quand la classe est active */
html.no-scroll,
body.no-scroll {
  height: 100%;
  overflow: hidden !important;
  position: fixed;      /* stoppe la molette et les inerties */
  width: 100%;
}


body.no-scroll {
  overflow: hidden;       /* empêche le scroll */
  height: 100vh;          /* bloque la hauteur pour éviter le rebond */
}


body{
  font-family:'Georgia',serif;
  background:#0a0a0a;
  color:#e0e0e0;
  overflow-x:hidden;
  background-image: url("taupe_fond.png");
}

/* ===== HERO ===== */
.hero{
  /*min-height:100vh;*/
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:3rem 1rem;
  /*background:linear-gradient(to bottom,rgba(10,10,10,0.4),rgba(10,10,10,0.8)),
  background-image: url("taupe_fond.png");*/
  background-size:cover;
  background-position:center;
}

h1.type-title{
  color:#d4a574;
  font-size:4rem;
  letter-spacing:4px;
  border-right:4px solid #d4a574;
  white-space:nowrap;
  overflow:hidden;
  /* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!CHANGEMENT ICI : steps(10, end) pour 10 caractères !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! */
  animation:typing 3s steps(10,end) forwards,blink .7s step-end infinite;
}
@keyframes typing{from{width:0}to{width:100%}}
@keyframes blink{50%{border-color:transparent}}
h1.finished{border-color:transparent;animation:glow 2.5s ease-in-out infinite alternate;}
@keyframes glow{0%{text-shadow:0 0 10px rgba(212,165,116,.4);}100%{text-shadow:0 0 40px rgba(212,165,116,.8);}}
.subtitle{
  margin-top:1rem;
  color:#aaa;
  font-style:italic;
  font-size:1.3rem;
  opacity:0;
  animation:fadeIn 2s ease 3.3s forwards;
}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.download-btn{
  margin-top:2rem;
  padding:1rem 2.5rem;
  border:none;
  border-radius:40px;
  background:linear-gradient(135deg,#d4a574,#b8884f);
  font-weight:bold;
  color:#1a1a1a;
  cursor:pointer;
  transition:.3s;
}
.download-btn:hover{transform:translateY(-3px);}

/* ===== NAVIGATION ===== */
nav{
  position:fixed;
  bottom:0;left:0;
  width:100%;
  background:rgba(26,26,26,0.9);
  border-top:2px solid #d4a574;
  backdrop-filter:blur(8px);
  z-index:1000;
}
nav ul{
  list-style:none;
  display:flex;
  justify-content:center;
  gap:2rem;
  padding:.8rem 0;
}
nav a{
  color:#d4a574;
  text-decoration:none;
  font-size:1rem;
  position:relative;
  transition:color .3s;
}
nav a::after{
  content:"";
  position:absolute;
  bottom:-5px;left:50%;
  transform:translateX(-50%);
  width:0;height:2px;
  background:#d4a574;
  transition:width .3s;
}
nav a:hover::after{width:100%;}
nav a:hover{color:#e0b584;}

/* ===== SECTIONS ===== */
#sections-wrapper {
  padding-bottom: 3rem;
  position: relative;
  min-height: 200px;
}

section {
  /* Retrait de display: none/block */
  max-width: 900px;
  margin: 0 auto;
  background: linear-gradient(180deg, #101010, #1b1410);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 0 10%; /* Padding vertical géré par height */
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);

  /* NOUVEAU: Réduction de la hauteur au minimum */
  height: 0;
  overflow: hidden;
  opacity: 0;
  transform: translateY(60px);

  /* Durée ralentie et uniforme (1.2s) */
  transition: opacity 1.2s ease-out, transform 1.2s cubic-bezier(0.19, 1, 0.22, 1), padding 1.2s ease, height 1.2s ease;
}

section.active {
  /* Hauteur fixée pour montrer le contenu (doit être assez grand) */
  height: auto; 
  padding: 6rem 10% 5rem; /* Padding vertical réintroduit */
  opacity: 1;
  transform: translateY(0);
  padding-top:3%;
}

/* On retire la classe .closing qui n'est plus nécessaire */

section.closing {
  opacity: 0;
  /* Quand ça part, on veut que ça parte un peu plus vite vers le haut */
  transform: translateY(-30px);
  transition: opacity 0.8s ease, transform 0.8s ease; 
}

section h2 {
  text-align: center;
  color: #d4a574;
  font-size: 2.2rem;
  margin-bottom: 2rem;
}

section p {
  line-height: 1.8;
  font-size: 1.1rem;
  color: #c0c0c0;
  text-align: justify;
}

/* ===== BOUTON CROIX / FERMETURE ===== */
.scroll-top {
  position: fixed;
  right: 2rem;
  bottom: 90px;
  width: 55px;
  height: 55px;
  border: none;
  border-radius: 50%;
  background: linear-gradient(135deg, #d4a574, #b8884f);
  color: #1a1a1a;
  font-size: 1.5rem;
  cursor: pointer;
  box-shadow: 0 5px 20px rgba(212, 165, 116, 0.4);
  z-index: 2000;
  
  /* Nouveau: Cache par défaut */
  opacity: 0;
  visibility: hidden;
  transform: scale(0.6);
  transition: opacity 0.3s, transform 0.3s, visibility 0.3s;
}

.scroll-top:hover {
  /* Retiré le rotate */
  transform: translateY(-4px) scale(1);
}

.scroll-top.visible {
    opacity: 1;
    visibility: visible;
    transform: scale(1);
}
</style>
</head>

<body>
<div class="hero">
  <h1 id="animatedTitle" class="type-title">Nom du Jeu</h1>
  <p class="subtitle">À la recherche des Dieux Disparus</p>
  <button class="download-btn" data-target="telecharger">Télécharger le jeu</button>
</div>

<nav>
<ul>
<li><a href="#lore">Histoire</a></li>
<li><a href="#gameplay">Gameplay</a></li>
<li><a href="#equipe">Équipe</a></li>
<li><a href="#telecharger">Télécharger</a></li>
</ul>
</nav>

<div id="sections-wrapper">
  <section id="lore">
    <h2>L'Histoire</h2>
    <p style="font-size:1rem;">Depuis des millénaires, les profondeurs de la terre abritent un secret oublié. Jadis, les dieux marchaient sous terre, illuminant les cavernes de leur présence divine. Mais un jour, sans avertissement, ils ont disparu, laissant le monde souterrain dans l'obscurité. Vous incarnez une taupe courageuse, gardienne des traditions. À travers des galeries infinies, retrouvez la trace des Dieux disparus.</p>
  </section>
  <section id="gameplay">
    <h2>Gameplay</h2>
    <p>Le jeu combine exploration et stratégie : creusez, percez des tunnels, découvrez des reliques et affrontez des ennemis corrompus. Chaque décision influence votre progression et les paysages souterrains se transforment au fil des quêtes.</p>
  </section>
  <section id="equipe">
    <h2>L'Équipe</h2>
    <p>Une équipe de passionnés : artistes, codeurs et musiciens s’unissent pour offrir une expérience sonore et visuelle unique. Ensemble, ils donnent vie à l’univers mystique de Mole's Quest.</p>
  </section>
  <section id="telecharger" style="text-align:center;">
    <h2>Téléchargement</h2>
    <p>Prêt pour l'aventure ?</p>
    <button class="download-btn">Télécharger pour Windows</button>
    <button class="download-btn" style="margin-left:1rem;">Télécharger pour Mac</button>
  </section>
</div>

<button class="scroll-top" id="scrollTopBtn" title="Fermer la section active">
    <i class="fa-solid fa-xmark"></i>
</button>
<script>
/* animation du titre */
const title = document.getElementById('animatedTitle');
title.addEventListener('animationend', e => {
  if (e.animationName === 'typing') title.classList.add('finished');
});

/* Gestion du Scroll Block */
function setScrollLocked(locked) {
  if (locked) {
    document.documentElement.classList.add('no-scroll');
    document.body.classList.add('no-scroll');
  } else {
    document.documentElement.classList.remove('no-scroll');
    document.body.classList.remove('no-scroll');
  }
}

// Référence au bouton croix
const scrollTopBtn = document.getElementById('scrollTopBtn');
// Fonction pour gérer la visibilité du bouton
function toggleCloseButton(show) {
    scrollTopBtn.classList.toggle('visible', show);
}


// Variable pour empêcher le spam de clics
let isAnimating = false; 
const TRANSITION_TIME = 1200; // 1200ms

function showSection(id) {
  if (isAnimating) return;

  const activeSection = document.querySelector('section.active');
  const newSection = document.getElementById(id);

  // Si on clique sur la section déjà ouverte, on ne fait rien
  if (activeSection === newSection) return;

  isAnimating = true;

  // Si on est en train de fermer une section
  if (activeSection) {
    activeSection.classList.remove('active');
    
    // Attendre que l'ancienne section se ferme (1200ms)
    setTimeout(() => {
      // Puis on ouvre la nouvelle
      newSection.classList.add('active');
      setScrollLocked(false);
      toggleCloseButton(true); // Afficher la croix
      
      const heroH = document.querySelector('.hero').offsetHeight * 0.95;
      window.scrollTo({ top: heroH, behavior: 'smooth' });
      
      // Attendre la fin de l'ouverture
      setTimeout(() => {
        isAnimating = false;
      }, TRANSITION_TIME);
    }, TRANSITION_TIME);

  } else {
    // Si aucune section n'est ouverte, on ouvre directement
    newSection.classList.add('active');
    setScrollLocked(false);
    toggleCloseButton(true); // Afficher la croix
    
    const heroH = document.querySelector('.hero').offsetHeight * 0.95;
    window.scrollTo({ top: heroH, behavior: 'smooth' });

    // Attendre la fin de l'ouverture
    setTimeout(() => {
      isAnimating = false;
    }, TRANSITION_TIME);
  }
}

// Fonction pour fermer la section active
function closeActiveSection() {
    if (isAnimating) return;
    
    const activeSection = document.querySelector('section.active');
    if (activeSection) {
        isAnimating = true;
        activeSection.classList.remove('active');
        toggleCloseButton(false); // Cacher la croix

        // Retour en haut de page
        window.scrollTo({ top: 0, behavior: 'smooth' });
        
        // Attendre la fin de la fermeture pour rebloquer le scroll
        setTimeout(() => {
            setScrollLocked(true);
            isAnimating = false;
        }, TRANSITION_TIME);
    }
}


/* Gestion des clics sur la navigation */
document.querySelectorAll('nav a').forEach(link => {
  link.addEventListener('click', function(e) {
    e.preventDefault(); 
    const targetId = this.getAttribute('href').substring(1);
    showSection(targetId);
  });
});

/* Gestion du bouton de téléchargement du Hero */
document.querySelector('.download-btn[data-target]').addEventListener('click', function(e) {
    e.preventDefault();
    const targetId = this.getAttribute('data-target');
    showSection(targetId);
});


/* Action du bouton Croix (Fermeture) */
document.getElementById('scrollTopBtn').addEventListener('click', closeActiveSection);


/* ==================================== */
/* NOUVEAUTÉ : Navigation au clavier */
/* ==================================== */
document.addEventListener('keydown', (e) => {
    const activeSection = document.querySelector('section.active');
    
    if (activeSection) {
        const sections = Array.from(document.querySelectorAll('#sections-wrapper section'));
        const activeIndex = sections.findIndex(sec => sec.classList.contains('active'));
        let targetIndex;
        
        // --- 1. Fermeture par Échap (Escape) ---
        if (e.key === 'Escape') {
            closeActiveSection();
            e.preventDefault(); // Empêche d'autres actions par défaut (ex: sortir du mode plein écran)
            return;
        }

        // --- 2. Navigation Gauche/Droite ---
        if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
            e.preventDefault(); // Empêche le scroll horizontal par défaut
            
            if (e.key === 'ArrowRight') {
                // Suivant : Boucle vers la première si on est à la fin
                targetIndex = (activeIndex + 1) % sections.length; 
            } else {
                // Précédent : Boucle vers la dernière si on est au début
                targetIndex = (activeIndex - 1 + sections.length) % sections.length;
            }
            
            const targetId = sections[targetIndex].id;
            showSection(targetId);
        }
    }
});
/* ==================================== */

/* ==================================== */
/* NOUVEAUTÉ : Navigation par Molette (Scroll) */
/* ==================================== */
document.addEventListener('wheel', (e) => {
    // Vérifie si une section est active et si aucune animation n'est en cours
    const activeSection = document.querySelector('section.active');
    if (!activeSection || isAnimating) {
        return; 
    }

    // On s'assure que le mouvement est vertical
    if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
        
        // Empêche le défilement normal de la page
        e.preventDefault(); 
        
        const sections = Array.from(document.querySelectorAll('#sections-wrapper section'));
        const activeIndex = sections.findIndex(sec => sec.classList.contains('active'));
        let targetIndex;
        
        // Défilement vers le bas (Down Scroll) -> Section Suivante
        if (e.deltaY > 0) {
            // Suivant : Boucle vers la première si on est à la fin
            targetIndex = (activeIndex + 1) % sections.length; 
        } 
        // Défilement vers le haut (Up Scroll) -> Section Précédente
        else if (e.deltaY < 0) {
            // Précédent : Boucle vers la dernière si on est au début
            targetIndex = (activeIndex - 1 + sections.length) % sections.length;
        } else {
            return; // Pas de mouvement Y
        }
        
        const targetId = sections[targetIndex].id;
        showSection(targetId);
    }
}, { passive: false }); // { passive: false } est crucial pour permettre le e.preventDefault()
/* ==================================== */



// Initialisation au chargement
setScrollLocked(true);
toggleCloseButton(false);







// Fonction pour fermer la section active
function closeActiveSection() {
    if (isAnimating) return;
    
    const activeSection = document.querySelector('section.active');
    if (activeSection) {
        isAnimating = true;
        activeSection.classList.remove('active');
        toggleCloseButton(false); // Cacher la croix

        // Retour en haut de page
        window.scrollTo({ top: 0, behavior: 'smooth' });
        
        // Attendre la fin de la fermeture pour rebloquer le scroll
        setTimeout(() => {
            setScrollLocked(true);
            isAnimating = false;
        }, TRANSITION_TIME);
    }
}


/* Gestion des clics sur la navigation */
document.querySelectorAll('nav a').forEach(link => {
  link.addEventListener('click', function(e) {
    e.preventDefault(); 
    const targetId = this.getAttribute('href').substring(1);
    showSection(targetId);
  });
});

/* Gestion du bouton de téléchargement du Hero */
document.querySelector('.download-btn[data-target]').addEventListener('click', function(e) {
    e.preventDefault();
    const targetId = this.getAttribute('data-target');
    showSection(targetId);
});


/* Action du bouton Croix (Fermeture) */
document.getElementById('scrollTopBtn').addEventListener('click', closeActiveSection);

// Initialisation au chargement
setScrollLocked(true);
toggleCloseButton(false);
</script>
</body>
</html>
